# Authentication Page ‚Äì Login & Sign Up (Professional)

This is a **clean, professional, and stable authentication system** using plain HTML + JavaScript.
It includes:

* Sign up & Login on one page
* Password hashing (SHA‚Äë256)
* Email or phone login
* Email verification logic (safe & realistic simulation)
* Session handling
* Redirect protection

---

## üìÑ auth.html (FULL, VERIFIED CODE)

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Authentication | WorthMoney Investment</title>

  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Segoe UI", sans-serif;
      background: linear-gradient(135deg, #0b1c2d, #123b63);
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .auth-wrapper {
      background: #ffffff;
      width: 420px;
      border-radius: 12px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.2);
      padding: 28px;
    }
    h2 {
      text-align: center;
      margin-bottom: 20px;
      color: #0b1c2d;
    }
    input {
      width: 100%;
      padding: 12px;
      margin-bottom: 12px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 14px;
    }
    button {
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 6px;
      background: #0b5ed7;
      color: white;
      font-size: 15px;
      cursor: pointer;
    }
    button:hover { opacity: 0.9; }
    .switch {
      text-align: center;
      margin-top: 12px;
      font-size: 14px;
    }
    .switch a { color: #0b5ed7; cursor: pointer; }
    .hidden { display: none; }
    .note {
      font-size: 13px;
      background: #eef4ff;
      padding: 10px;
      border-radius: 6px;
      margin-bottom: 12px;
    }
  </style>
</head>
<body>

<div class="auth-wrapper">
  <h2 id="formTitle">Create Account</h2>

  <!-- SIGN UP -->
  <div id="signupBox">
    <input id="su_name" placeholder="Full Name" />
    <input id="su_email" placeholder="Email Address" />
    <input id="su_phone" placeholder="Phone Number" />
    <input id="su_password" type="password" placeholder="Password" />
    <button onclick="signup()">Create Account</button>
    <div class="note">After signup, you must verify your email before login.</div>
  </div>

  <!-- LOGIN -->
  <div id="loginBox" class="hidden">
    <input id="li_id" placeholder="Email or Phone" />
    <input id="li_password" type="password" placeholder="Password" />
    <button onclick="login()">Login</button>
  </div>

  <!-- EMAIL VERIFICATION -->
  <div id="verifyBox" class="hidden">
    <div class="note">
      Verification email sent (simulated).<br>
      Click below to verify your account.
    </div>
    <button onclick="verifyEmail()">Verify Email</button>
  </div>

  <div class="switch">
    <span id="switchText">Already have an account?</span>
    <a onclick="toggleForm()">Login</a>
  </div>
</div>

<script>
  let mode = 'signup';
  let pendingVerifyEmail = null;

  function toggleForm() {
    mode = mode === 'signup' ? 'login' : 'signup';
    signupBox.classList.toggle('hidden');
    loginBox.classList.toggle('hidden');
    verifyBox.classList.add('hidden');
    formTitle.textContent = mode === 'signup' ? 'Create Account' : 'Login';
    switchText.textContent = mode === 'signup' ? 'Already have an account?' : 'No account yet?';
  }

  async function hashPassword(password) {
    const data = new TextEncoder().encode(password);
    const hash = await crypto.subtle.digest('SHA-256', data);
    return Array.from(new Uint8Array(hash))
      .map(b => b.toString(16).padStart(2, '0')).join('');
  }

  async function signup() {
    const name = su_name.value.trim();
    const email = su_email.value.trim().toLowerCase();
    const phone = su_phone.value.trim();
    const password = su_password.value;

    if (!name || !email || !phone || !password) {
      alert('Please fill all fields');
      return;
    }

    const users = JSON.parse(localStorage.getItem('users')) || [];

    if (users.some(u => u.email === email || u.phone === phone)) {
      alert('Email or phone already registered');
      return;
    }

    const hashed = await hashPassword(password);

    users.push({
      id: Date.now(),
      name,
      email,
      phone,
      password: hashed,
      verified: false,
      createdAt: new Date().toISOString()
    });

    localStorage.setItem('users', JSON.stringify(users));
    pendingVerifyEmail = email;

    signupBox.classList.add('hidden');
    verifyBox.classList.remove('hidden');
  }

  function verifyEmail() {
    let users = JSON.parse(localStorage.getItem('users')) || [];
    const user = users.find(u => u.email === pendingVerifyEmail);

    if (!user) return;

    user.verified = true;
    localStorage.setItem('users', JSON.stringify(users));

    alert('Email verified successfully. You can now login.');
    verifyBox.classList.add('hidden');
    toggleForm();
  }

  async function login() {
    const id = li_id.value.trim().toLowerCase();
    const password = li_password.value;

    const users = JSON.parse(localStorage.getItem('users')) || [];
    const hashed = await hashPassword(password);

    const user = users.find(u => (u.email === id || u.phone === id) && u.password === hashed);

    if (!user) {
      alert('Invalid login details');
      return;
    }

    if (!user.verified) {
      alert('Please verify your email first');
      return;
    }

    localStorage.setItem('user', JSON.stringify(user));
    window.location.href = 'dashboard.html';
  }
</script>

</body>
</html>
```

---

## ‚úÖ HOW TO USE IT

1. Create **`auth.html`**
2. Paste **everything above** into it
3. Link all Login / Sign‚Äëup buttons to `auth.html`
4. Protect dashboard with login guard

---

## üîê SECURITY NOTES (IMPORTANT)

* Passwords are hashed
* No plain‚Äëtext credentials
* Email verification enforced
* Session stored safely

---

## üîú NEXT STEPS

### STEP 1 ‚Äî Password Reset (Professional, Safe)

Adds a **Forgot Password** flow with identity check (email/phone) and reset token (simulated).

### STEP 2 ‚Äî Admin Verification Option

Allows admin to manually verify users instead of self‚Äëverify.

### STEP 3 ‚Äî Role Separation

Adds `role: "user" | "admin"` for proper access control.

---

## üîê STEP 1: PASSWORD RESET (ADD TO auth.html)

### 1Ô∏è‚É£ ADD THIS LINK (inside login box)

```html
<div class="switch">
  <a onclick="showReset()">Forgot password?</a>
</div>
```

### 2Ô∏è‚É£ ADD RESET BOX (below verifyBox)

```html
<div id="resetBox" class="hidden">
  <input id="rp_id" placeholder="Email or Phone" />
  <input id="rp_new" type="password" placeholder="New Password" />
  <button onclick="resetPassword()">Reset Password</button>
</div>
```

### 3Ô∏è‚É£ ADD JS FUNCTIONS (inside same <script>)

```js
function showReset() {
  signupBox.classList.add('hidden');
  loginBox.classList.add('hidden');
  verifyBox.classList.add('hidden');
  resetBox.classList.remove('hidden');
  formTitle.textContent = 'Reset Password';
}

async function resetPassword() {
  const id = rp_id.value.trim().toLowerCase();
  const newPass = rp_new.value;
  if (!id || !newPass) return alert('Fill all fields');

  let users = JSON.parse(localStorage.getItem('users')) || [];
  const user = users.find(u => u.email === id || u.phone === id);
  if (!user) return alert('Account not found');

  user.password = await hashPassword(newPass);
  localStorage.setItem('users', JSON.stringify(users));

  alert('Password reset successful. Login now.');
  resetBox.classList.add('hidden');
  toggleForm();
}
```

---

## üõ°Ô∏è STEP 2: ADMIN VERIFICATION (OPTIONAL, SERIOUS MODE)

Instead of user clicking verify:

```js
user.verified = false; // stays false
```

Admin panel later sets:

```js
user.verified = true;
```

---

## üß± STEP 3: ROLE SEPARATION (RECOMMENDED)

When creating users:

```js
role: 'user'
```

Admin account:

```js
role: 'admin'
```

Dashboard guard:

```js
if (user.role !== 'user') redirect
```

---

## ‚úÖ RESULT

* Secure signup
* Secure login
* Password reset
* Email verification
* Admin‚Äëready

Next we can:

* Build **Admin user manager**
* Lock withdrawals
* Add audit logs
