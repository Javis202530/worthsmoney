<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Wallet | WorthMoney Investment</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f4f6fb;
}
header {
  background: #0b3c5d;
  color: #fff;
  padding: 15px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.menu {
  font-size: 22px;
  cursor: pointer;
}
nav {
  display: none;
  position: absolute;
  top: 60px;
  right: 15px;
  background: #fff;
  box-shadow: 0 4px 10px rgba(0,0,0,.1);
  border-radius: 6px;
}
nav a {
  display: block;
  padding: 12px 18px;
  text-decoration: none;
  color: #333;
}
nav a:hover {
  background: #f1f1f1;
}

.container {
  max-width: 900px;
  margin: 30px auto;
  padding: 20px;
}

.cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px,1fr));
  gap: 15px;
}
.card {
  background: #fff;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0,0,0,.08);
}
.card h3 {
  margin: 0;
  font-size: 14px;
  color: #666;
}
.card p {
  font-size: 22px;
  font-weight: bold;
  margin: 10px 0 0;
}

.section {
  background: #fff;
  margin-top: 25px;
  padding: 25px;
  border-radius: 8px;
}

input, select {
  width: 100%;
  padding: 12px;
  margin-bottom: 15px;
  border-radius: 6px;
  border: 1px solid #ccc;
}

button {
  padding: 12px 18px;
  border: none;
  border-radius: 6px;
  font-weight: bold;
  cursor: pointer;
}
.depositBtn { background: #1aa260; color: #fff; }
.withdrawBtn { background: #c0392b; color: #fff; }

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 15px;
}
th, td {
  padding: 10px;
  border-bottom: 1px solid #eee;
}
th { background: #f2f4f7; }

.pending { color: orange; font-weight: bold; }
.approved { color: green; font-weight: bold; }
.rejected { color: red; font-weight: bold; }

footer {
  text-align: center;
  padding: 20px;
  color: #777;
}
</style>
</head>

<body>

<header>
  <strong>WorthMoney Wallet</strong>
  <div class="menu" onclick="toggleMenu()">☰</div>
  <nav id="nav">
  <a href="dashboard.html">Dashboard</a>
  <a href="wallet.html">Wallet</a>
  <a href="#" onclick="logout()">Logout</a>
</nav>

</header>

<div class="container">

<!-- SUMMARY -->
<div class="cards">
  <div class="card">
    <h3>Total Deposited</h3>
    <p id="totalDeposits">$0.00</p>
  </div>
  <div class="card">
    <h3>Total Withdrawn</h3>
    <p id="totalWithdraws">$0.00</p>
  </div>
</div>

<!-- DEPOSIT -->
<div class="section">
<h2>Deposit Funds</h2>

<input type="number" id="depositAmount" placeholder="Amount (Min $10 – Max $2000)">
<select id="depositMethod">
  <option value="">Select Payment Method</option>
  <option value="momo">Mobile Money (MTN / Airtel)</option>
  <option value="flutterwave">Flutterwave</option>
  <option value="bank">Bank Transfer</option>
  <option value="crypto">Cryptocurrency</option>
</select>

<div id="methodInfo"></div>

<button class="depositBtn" onclick="submitDeposit()">Proceed Deposit</button>
</div>

<!-- WITHDRAW -->
<div class="section">
<h2>Withdraw Funds</h2>
<input type="number" id="withdrawAmount" placeholder="Amount (Min $10 – Max $500)">
<button class="withdrawBtn" onclick="submitWithdraw()">Request Withdrawal</button>
</div>

<!-- TRANSACTIONS -->
<div class="section">
<h2>Transaction History</h2>
<table>
<thead>
<tr>
<th>Date</th>
<th>Type</th>
<th>Method</th>
<th>Amount</th>
<th>Status</th>
</tr>
</thead>
<tbody id="txTable"></tbody>
</table>
</div>

</div>

<footer>© 2025 WorthMoney Investment</footer>

<script>
const momoCodes = ["MTN-8234", "MTN-1190", "AIRTEL-5521", "AIRTEL-7740", "MTN-3902"];

function toggleMenu() {
  const nav = document.getElementById("nav");
  nav.style.display = nav.style.display === "block" ? "none" : "block";
}

function getTx() {
  return JSON.parse(localStorage.getItem("transactions")) || [];
}
function saveTx(txs) {
  localStorage.setItem("transactions", JSON.stringify(txs));
}

document.getElementById("depositMethod").addEventListener("change", function() {
  const box = document.getElementById("methodInfo");
  box.innerHTML = "";

  if (this.value === "momo") {
    const code = momoCodes[Math.floor(Math.random() * momoCodes.length)];
    box.innerHTML = `<p><strong>Pay via Mobile Money</strong><br>
    Selected Code: <b>${code}</b><br>
    MTN or Airtel accepted</p>`;
  }
  if (this.value === "bank") {
    box.innerHTML = `<p><strong>Bank Transfer</strong><br>
    Stanbic / Centenary / Equity Bank<br>
    Account details will be shown after request</p>`;
  }
  if (this.value === "crypto") {
    box.innerHTML = `<p><strong>Crypto Accepted</strong><br>
    BTC • ETH • USDT (TRC20)</p>`;
  }
  if (this.value === "flutterwave") {
    box.innerHTML = `<p><strong>Flutterwave</strong><br>
    Pay with Card or MoMo securely</p>`;
  }
});

function submitDeposit() {
  const amount = +depositAmount.value;
  const method = depositMethod.value;

  if (amount < 10 || amount > 2000) {
    alert("Deposit must be between $10 and $2000");
    return;
  }
  if (!method) {
    alert("Select a payment method");
    return;
  }

  const txs = getTx();
  txs.unshift({
    type: "Deposit",
    method,
    amount,
    status: "Pending",
    date: new Date().toLocaleString()
  });
  saveTx(txs);
  render();
  alert("Deposit request submitted for approval");
}

function submitWithdraw() {
  const amount = +withdrawAmount.value;
  if (amount < 10 || amount > 500) {
    alert("Withdraw must be between $10 and $500");
    return;
  }

  const txs = getTx();
  txs.unshift({
    type: "Withdraw",
    method: "Wallet",
    amount,
    status: "Pending",
    date: new Date().toLocaleString()
  });
  saveTx(txs);
  render();
  alert("Withdrawal request submitted");
}

  document.getElementById("depositMethod").addEventListener("change", function () {
  const box = document.getElementById("methodInfo");
  box.innerHTML = "";

  if (this.value === "momo") {
    const code = momoCodes[Math.floor(Math.random() * momoCodes.length)];
    box.innerHTML = `
      <p><b>Mobile Money Payment</b><br>
      Pay to code: <strong>${code}</strong><br>
      MTN or Airtel accepted</p>`;
  }

  if (this.value === "bank") {
    box.innerHTML = `
      <p><b>Bank Transfer</b><br>
      Stanbic / Centenary / Equity<br>
      Details shown after approval</p>`;
  }

  if (this.value === "crypto") {
    box.innerHTML = `
      <p><b>Crypto Payment</b><br>
      BTC • ETH • USDT (TRC20)</p>`;
  }

  if (this.value === "flutterwave") {
    box.innerHTML = `
      <p><b>Flutterwave</b><br>
      Pay securely with Card or MoMo</p>`;
  }
});
}

function render() {
  const txs = getTx();
  let dep = 0, wit = 0;
  const table = document.getElementById("txTable");
  table.innerHTML = "";

  if (!txs.length) {
    table.innerHTML = `<tr><td colspan="5">No transactions</td></tr>`;
    return;
  }

  txs.forEach(t => {
    if (t.type === "Deposit" && t.status === "Approved") dep += t.amount;
    if (t.type === "Withdraw" && t.status === "Approved") wit += t.amount;

    table.innerHTML += `
    <tr>
      <td>${t.date}</td>
      <td>${t.type}</td>
      <td>${t.method}</td>
      <td>$${t.amount}</td>
      <td class="${t.status.toLowerCase()}">${t.status}</td>
    </tr>`;
  });

  totalDeposits.textContent = `$${dep.toFixed(2)}`;
  totalWithdraws.textContent = `$${wit.toFixed(2)}`;
}

render();
  function logout() {
  localStorage.removeItem("user");
  window.location.href = "index.html";
}
function render() {
  const txs = getTx();
  let dep = 0, wit = 0;
  const table = document.getElementById("txTable");
  table.innerHTML = "";

  if (!txs.length) {
    table.innerHTML = `<tr><td colspan="5">No transactions</td></tr>`;
    return;
  }

  txs.forEach(t => {
    if (t.type === "Deposit" && t.status === "Approved") dep += t.amount;
    if (t.type === "Withdraw" && t.status === "Approved") wit += t.amount;

    table.innerHTML += `
      <tr>
        <td>${t.date}</td>
        <td>${t.type}</td>
        <td>${t.method}</td>
        <td>$${t.amount}</td>
        <td class="${t.status.toLowerCase()}">${t.status}</td>
      </tr>`;
  });

  totalDeposits.textContent = `$${dep.toFixed(2)}`;
  totalWithdraws.textContent = `$${wit.toFixed(2)}`;
}

render();

</script>
<script>
  let timeout;
  const MAX_IDLE = 15 * 60 * 1000; // 15 minutes

  function resetTimer() {
    clearTimeout(timeout);
    timeout = setTimeout(() => {
      alert("Session expired. Please login again.");
      localStorage.removeItem("user");
      window.location.href = "auth.html";
    }, MAX_IDLE);
  }

  window.onload = resetTimer;
  document.onmousemove = resetTimer;
  document.onkeypress = resetTimer;
</script>

</body>
</html>


